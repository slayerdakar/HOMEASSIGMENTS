<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task 1</title>

</head>

<body>

  <h1>Задача 2</h1>


  <p>
    Морський бій. Ворожий корабель, може знаходитись в одному із квадратів (кількість квадратів вводиться з клавіатури),
    які розташовані лінійно (один за одним) на річці.
    Позиція корабля визначається комп’ютером випадковим чином.
    Гра відбувається за правилами:
    1. якщо користувач стріляє у заданий квадрат (тобто вводиться номер квадрата), то корабель потоплено;
    2. якщо корабель знаходиться у сусідньому по відношенню до квадрата, де знаходиться корабель, то корабель пошкоджено
    (про це повідомляємо користувача).
    За два постріли спробувати потопити корабель.

  </p>


  <script>

    //Формуємо поле для гри
    let playingFieldSize = parseInt(prompt('Введідь к-сь квадратів ігрового поля, минімально допустиме значення ігрового поля - 2 квадрати :'))

    //Перевірка коррекності вводу розміру ігрового поля
    if (playingFieldSize >= 2) {

      const MIN_SHIP_POSITION_RANGE = 1
      const MAX_SHIP_POSITION_RANGE = playingFieldSize

      //Генеруємо випадкову позицію корабля
      let shipPositionRandom = MIN_SHIP_POSITION_RANGE + Math.floor(Math.random() * (MAX_SHIP_POSITION_RANGE - MIN_SHIP_POSITION_RANGE + 1))

      //Для зручності, щоб в консолі бачити позицію корабля
      console.log(shipPositionRandom);


      //Ввод значення першого пострілу
      let userShotOne = parseInt(prompt(`Гра почалася. \nЗробіть свій перший постріл від 1 до ${playingFieldSize}.`))

      //Перевірка першого значення(пострілу), що воно в межах поля
      if (userShotOne > 0 && userShotOne <= playingFieldSize) {
        //Попадання з першого пострілу
        if (userShotOne === shipPositionRandom)
          alert('Влучний постріл, корабель потоплено з першого пострілу!')
        //Пошкодження корабля (або перед ,або за кораблем)
        else if (userShotOne === shipPositionRandom - 1 || userShotOne === shipPositionRandom + 1) {
          alert('Корабель пошкоджено! Приготуйся до другого пострілу.')
          //Ввод значення другого пострілу
          let userShotTwo = parseInt(prompt(`Зробіть свій другий постріл від 1 до ${playingFieldSize}.`))
          //Перевірка другого значення(пострілу), що воно в межах поля
          if (userShotTwo > 0 && userShotTwo <= playingFieldSize) {
            //Попадання
            if (userShotTwo === shipPositionRandom)
              alert('Влучний постріл, корабель потоплено з другого пострілу!')
            //Пошкодження корабля (або перед ,або за кораблем)
            else if (userShotTwo === shipPositionRandom - 1 || userShotTwo === shipPositionRandom + 1)
              alert('Гра завершена!\nКорабель пошкоджено, але не потоплений, наступного разу пощастить.')
            //Не влучив
            else
              alert('Гра завершена!\nНе влучив, наступного разу пощастить.')
          }
          //Гра зупинена значення(постріл) за межами поля
          else
            alert(`Не корректно введене значення!!! Постріл має бути в межах ігрового поля від 1 до ${playingFieldSize}`)
        }
        //Другий постріл після промаху першого
        else {
          alert('Не влучив, приготуйся до другого пострілу.')
          //Ввод значення другого пострілу
          let userShotTwo = parseInt(prompt(`Зробіть свій другий постріл від 1 до ${playingFieldSize}.`))
          //Перевірка другого значення(пострілу), що воно в межах поля
          if (userShotTwo > 0 && userShotTwo <= playingFieldSize) {
            //Попадання з другого пострілу
            if (userShotTwo === shipPositionRandom)
              alert('Влучний постріл, корабель потоплено з другого пострілу!')
            //Пошкодження корабля (або перед ,або за кораблем)
            else if (userShotTwo === shipPositionRandom - 1 || userShotTwo === shipPositionRandom + 1)
              alert('Гра завершена!\nКорабель пошкоджено, це був твій другій постріл, наступного разу пощастить.')
            //Не влучив
            else
              alert('Гра завершена!\nНе влучив, наступного разу пощастить.')
          }
          //Гра зупинена значення(постріл) за межами поля
          else
            alert(`Не корректно введене значення!!! Постріл має бути в межах ігрового поля від 1 до ${playingFieldSize}`)
        }
        //Гра зупинена значення(постріл) за межами поля
      } else
        alert(`Не корректно введене значення!!! Постріл має бути в межах ігрового поля від 1 до ${playingFieldSize}`)
    }
    //Гра зупинена не корректно введено розмір поля
    else
      alert('Введена к-сть квадратів поля меньше 2!!!')


  </script>

</body>

</html>