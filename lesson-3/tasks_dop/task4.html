<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task 1</title>

</head>

<body>

  <h1>Задача 4</h1>


  <p>
    Морський бій. Ворожий корабель, може знаходитись в одному із квадратів (кількість квадратів вводиться з
    клавіатури), які розташовані лінійно (один за одним) на річці.<br>
    Позиція корабля визначається комп’ютером випадковим чином.<br>
    Гра відбувається за правилами:<br>
    1. якщо користувач стріляє у заданий квадрат (тобто вводиться номер квадрата), то корабель потоплено;<br>
    2. якщо корабель знаходиться у сусідньому по відношенню до квадрата, де знаходиться корабель, то корабель
    пошкоджено (про це повідомляємо користувача).<br>
    За два постріли спробувати потопити корабель.
  </p>
  <img src="./img/task-4.jpg" alt="image">


  <script>

    //Ввод користувачем значення розміру ігрового поля
    let playingFieldSize = parseInt(prompt('Введідь к-сь квадратів ігрового поля, минімально допустиме значення ігрового поля - 2 квадрати :'))

    //Перевірка коррекності вводу розміру ігрового поля
    if (playingFieldSize >= 2) {

      const MIN_SHIP_POSITION_RANGE = 1
      const MAX_SHIP_POSITION_RANGE = playingFieldSize

      //Генеруємо випадкову позицію корабля
      let shipPositionRandom = MIN_SHIP_POSITION_RANGE + Math.floor(Math.random() * (MAX_SHIP_POSITION_RANGE - MIN_SHIP_POSITION_RANGE + 1))

      //Для зручності, щоб в консолі бачити позицію корабля
      console.log(shipPositionRandom);


      //Ввод користувачем значення першого пострілу
      let userShot = parseInt(prompt(`Гра почалася. \nЗробіть свій перший постріл від 1 до ${playingFieldSize}.`))

      //Перевірка першого значення(пострілу), що воно в межах поля
      if (userShot > 0 && userShot <= playingFieldSize) {
        //Попадання з першого пострілу
        if (userShot === shipPositionRandom)
          alert('Влучний постріл, корабель потоплено з першого пострілу!')
        //Пошкодження корабля (або перед ,або за кораблем)

        else if (userShot !== shipPositionRandom) {

          if (true) {
            if (userShot === shipPositionRandom - 1 || userShot === shipPositionRandom + 1)
              alert('Корабель пошкоджено! Приготуйся до другого пострілу.')
            else
              alert('Не влучив, приготуйся до другого пострілу.')
          }
          //Ввод користувачем значення другого пострілу
          let userShotTwo = parseInt(prompt(`Зробіть свій другий постріл від 1 до ${playingFieldSize}.`))
          //Перевірка другого значення(пострілу), що воно в межах поля
          if (userShotTwo > 0 && userShotTwo <= playingFieldSize) {
            //Попадання
            if (userShotTwo === shipPositionRandom)
              alert('Влучний постріл, корабель потоплено з другого пострілу!')
            //Пошкодження корабля (або перед ,або за кораблем)
            else if (userShotTwo === shipPositionRandom - 1 || userShotTwo === shipPositionRandom + 1)
              alert('Гра завершена!\nКорабель пошкоджено, але не потоплений, наступного разу пощастить.')
            //Не влучив
            else
              alert('Гра завершена!\nНе влучив, наступного разу пощастить.')
          }
          //Гра зупинена значення(постріл) за межами поля
          else
            alert(`Не корректно введене значення!!! Постріл має бути в межах ігрового поля від 1 до ${playingFieldSize}`)
        }

      } else
        alert(`Не корректно введене значення!!! Постріл має бути в межах ігрового поля від 1 до ${playingFieldSize}`)
    }
    //Гра зупинена не корректно введено розмір поля
    else
      alert('Введена к-сть квадратів поля МЕНЬШЕ 2!!!')


  </script>

</body>

</html>